import { useEffect, useCallback, useMemo } from 'react'
import * as actions from './actions'
import { useSelector, useDispatch } from 'react-redux'
import { bindActionCreators } from 'redux'
import { type State } from './initial'

export const useInit = () => {
  const state = useSelector<State>(state => state.init)
  const dispatch = useDispatch()
  const _actions = useMemo(() => {
    return bindActionCreators(actions, dispatch)
  }, [actions, dispatch])

  useEffect(() => {
    _actions.init()
  }, [])

  return state
}
